{"remainingRequest":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\src\\views\\OrderReturnApply.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\src\\views\\OrderReturnApply.vue","mtime":1659793824000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7Tm90aWZ5fSBmcm9tICd2YW50JzsKaW1wb3J0IHtMb2FkaW5nfSBmcm9tICJlbGVtZW50LXVpIjsKaW1wb3J0IG9yZGVyVHJhZGVSZWZ1bmRBcGkgZnJvbSAiLi4vYXBpL29yZGVyVHJhZGVSZWZ1bmRBcGkiOwoKY29uc3QgUEFHRV9OQU1FID0gIumAgOasvueUs+ivt+mhtemdoiIKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIk9yZGVyUmV0dXJuQXBwbHkiLAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgb3JkZXJJdGVtOnVuZGVmaW5lZCwKICAgICAgICAgICAgLyoqIOmAgOasvuWOn+WboOS4jeiDveS4uuepuiAqLwogICAgICAgICAgICBidXllclJlYXNvbjogIua1i+ivleeUs+ivt+eQhueUsSIsCiAgICAgICAgICAgIC8qKiDpgIDmrL7nlLPor7fkurogKi8KICAgICAgICAgICAgYnV5ZXJOYW1lOiAi6I6J6I6J5LidIiwKICAgICAgICAgICAgLyoqIOmAgOasvueUs+ivt+S6uueahOiBlOezu+eUteivnSAqLwogICAgICAgICAgICBidXllclBob25lTnVtYmVyOiAiMTkxMTIzNDU2NzgiLAogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIHN0YXR1c01lc3NhZ2UoKXsKICAgICAgICAgICAgaWYgKHRoaXMub3JkZXJJdGVtKXsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm9yZGVySXRlbS5pZCl7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLm9yZGVySXRlbS5zdGF0dXMpewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiAi5bey5Ye65Y2VIjsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gIuW+heWPlumkkCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuICLmtL7pgIHkuK0iOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiAi5bey6YCB6L6+IjsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gIuWujOaIkCI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKXsKICAgICAgICBjb25zb2xlLmxvZyhQQUdFX05BTUUrIuWIm+W7uiIpOwogICAgICAgIHRoaXMuaW5pdERhdGEoKQogICAgfSwKICAgIGJlZm9yZU1vdW50KCkgewogICAgICAgIGNvbnNvbGUubG9nKFBBR0VfTkFNRSsi5Yid5aeL5YyWIik7CiAgICB9LAogICAgbW91bnRlZCgpewogICAgICAgIGNvbnNvbGUubG9nKFBBR0VfTkFNRSsi5Yid5aeL5YyW5a6M5oiQIik7CiAgICB9LAogICAgYmVmb3JlRGVzdHJveSgpIHsKICAgICAgICBjb25zb2xlLmxvZyhQQUdFX05BTUUrIumUgOavgeWJjSIpOwogICAgfSwKICAgIGRlc3Ryb3llZCgpIHsKICAgICAgICBjb25zb2xlLmxvZyhQQUdFX05BTUUrIumUgOavgeS6hiIpOwogICAgfSwKICAgIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgICAgICBjb25zb2xlLmxvZyhQQUdFX05BTUUrIui3r+eUseWZqOi/m+WFpSIpOwogICAgICAgIG5leHQodm0gPT4gewogICAgICAgICAgICB2bS5pbml0RGF0YSgpOwogICAgICAgIH0pOwogICAgfSwKICAgIGJlZm9yZVJvdXRlTGVhdmUodG8sIGZyb20sIG5leHQpIHsKICAgICAgICB0aGlzLm9yZGVySXRlbSA9IHVuZGVmaW5lZDsKICAgICAgICB0aGlzLmRyYXdlciA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKFBBR0VfTkFNRSwi57uE5Lu25a+86Iiq5a6I5Y2r6Lev55Sx5Zmo56a75byAIik7CiAgICAgICAgbmV4dCgpOwogICAgfSwKICAgIG1ldGhvZHM6ewoKICAgICAgICBpbml0RGF0YSgpewogICAgICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zKSBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSAgdGhpcy5vcmRlckl0ZW0gPSB0aGlzLiRyb3V0ZS5wYXJhbXM7CiAgICAgICAgICAgIGlmICghdGhpcy5vcmRlckl0ZW0peyBOb3RpZnkoIuaXoOadg+aTjeS9nCIpO3RoaXMuJHJvdXRlci5yZXBsYWNlKCB7cGF0aDoiL29yZGVyIn0pOyB9CiAgICAgICAgICAgIGlmICh0aGlzLm9yZGVySXRlbSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInN0YXR1cywiLHRoaXMub3JkZXJJdGVtLnN0YXR1cyk7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcmRlckl0ZW0uc3RhdHVzID49IDIgJiYgNiA8PSB0aGlzLm9yZGVySXRlbS5zdGF0dXMpewogICAgICAgICAgICAgICAgICAgIE5vdGlmeSgi5oKo6YCJ5oup6K6i5Y2V5peg5rOV5pON5L2cIikKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiL29yZGVyIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICAvLyDlj5HotbfpgIDmrL7nlLPor7cKICAgICAgICBvblN1Ym1pdCgpewogICAgICAgICAgICBpZiAodGhpcy5vcmRlckl0ZW0pewogICAgICAgICAgICAgICAgY29uc3QgeyBpZCB9ID0gdGhpcy5vcmRlckl0ZW07CiAgICAgICAgICAgICAgICBpZiAoaWQpewogICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd2VyID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZGlhbG9nLmNvbmZpcm0oewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+itpuWRiuaPkOekuicsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfnoa7orqTopoHmj5DkuqTnlLPor7fpgIDmrL7lkJfvvJ8nLAogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2byA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVySWQ6IGlkLC8vIOiuouWNleWPtwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5ZXJOYW1lOiB0aGlzLmJ1eWVyTmFtZSwvLyDpgIDmrL7ljp/lm6DkuI3og73kuLrnqboKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eWVyUGhvbmVOdW1iZXI6IHRoaXMuYnV5ZXJQaG9uZU51bWJlciwvLyDpgIDmrL7nlLPor7fkuroKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1eWVyUmVhc29uOiB0aGlzLmJ1eWVyUmVhc29uLC8vIOmAgOasvueUs+ivt+S6uueahOiBlOezu+eUteivnQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb2FkaW5nSW5zdGFuY2UgPSBMb2FkaW5nLnNlcnZpY2UoeyBmdWxsc2NyZWVuOiB0cnVlIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge3N0YXR1cyxjb2RlLG1lc3NhZ2V9ID0gYXdhaXQgb3JkZXJUcmFkZVJlZnVuZEFwaS5yZXR1cm5BcHBseSh2byk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nSW5zdGFuY2UuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNzVG9hc3QoIuaPkOS6pOaIkOWKnyzmraPlnKjljrvorqLljZXpobUiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvb3JkZXIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfWNhdGNoIChlKXt9CiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdJbnN0YW5jZS5jbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIE5vdGlmeSgi5pyq55+l6ZSZ6K+vLOivt+mHjeivlSIpCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvb3JkZXIiKTsKICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7IH0pOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgTm90aWZ5KCLmnKrnn6XplJnor68s6K+36YeN6K+VIikKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiL29yZGVyIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgTm90aWZ5KCLmnKrnn6XplJnor68s6K+36YeN6K+VIikKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvb3JkZXIiKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgoKICAgICAgICAvLyDmo4Dmn6XmiYvmnLrlj7cKICAgICAgICBudW1iZXJDaGVja2luZ0V2ZW50KGUpewogICAgICAgICAgICBjb25zdCByZWcgPSAgL15bMS05XVxkKiQvOwogICAgICAgICAgICBpZiAoZSl7CiAgICAgICAgICAgICAgICBpZighcmVnLnRlc3QoZSkpewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5pWw5a2XJywKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZ1bmRBcHBsaWNhbnRQaG9uZU51bWJlciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgfQp9Cg=="},{"version":3,"sources":["OrderReturnApply.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"OrderReturnApply.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"ss-drawer-form__body\" v-if=\"orderItem\">\n        <div class=\"ss-order-details__body\">\n            <div>\n                <span>支付流水:</span>\n                <span>{{ orderItem.id }}</span>\n            </div>\n            <div>\n                <span>订单号:</span>\n                <span>{{ orderItem.outTradeNo }}</span>\n            </div>\n            <div>\n                <span>订单状态:</span>\n                <span>{{ statusMessage }}</span>\n            </div>\n            <div>\n                <span>退款路径:</span>\n                <span>原支付路径退回</span>\n            </div>\n            <div>\n                <span>退单菜品数量:</span>\n                <span>{{ orderItem.productTotalNumber }}</span>\n            </div>\n            <div>\n                <span>实际支付金额:</span>\n                <span>{{ orderItem.billPrice }}</span>\n            </div>\n            <div>\n                <span>退款金额:</span>\n                <span>{{ orderItem.billPrice}}</span>\n            </div>\n        </div>\n        <div class=\"ss-order-not__body\">\n            <div>申请人姓名:</div>\n            <el-input v-model=\"buyerName\" placeholder=\"请输入申请人姓名\"></el-input>\n        </div>\n        <div class=\"ss-order-not__body\">\n            <div>联系手机号:</div>\n            <el-input @input=\"numberCheckingEvent\" v-model=\"buyerPhoneNumber\"  placeholder=\"请输入联系手机号\"></el-input>\n        </div>\n        <div class=\"ss-order-not__body\">\n            <div>退款原因:</div>\n            <el-input\n                type=\"textarea\"\n                placeholder=\"请输入退款原因\"\n                v-model=\"buyerReason\"\n                maxlength=\"30\"\n                show-word-limit/>\n        </div>\n        <div class=\"ss-order-submit-button__body\">\n            <el-button class=\"ss-submit-button\" type=\"primary\" @click.stop.prevent=\"onSubmit\">提交</el-button>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {Notify} from 'vant';\nimport {Loading} from \"element-ui\";\nimport orderTradeRefundApi from \"../api/orderTradeRefundApi\";\n\nconst PAGE_NAME = \"退款申请页面\"\nexport default {\n    name: \"OrderReturnApply\",\n    data(){\n        return{\n            orderItem:undefined,\n            /** 退款原因不能为空 */\n            buyerReason: \"测试申请理由\",\n            /** 退款申请人 */\n            buyerName: \"莉莉丝\",\n            /** 退款申请人的联系电话 */\n            buyerPhoneNumber: \"19112345678\",\n        }\n    },\n    computed: {\n        statusMessage(){\n            if (this.orderItem){\n                if (this.orderItem.id){\n                    switch (this.orderItem.status){\n                        case 2: return \"已出单\";\n                        case 3: return \"待取餐\";\n                        case 4: return \"派送中\";\n                        case 5: return \"已送达\";\n                        case 6: return \"完成\";\n                    }\n                }\n            }\n        }\n    },\n    created(){\n        console.log(PAGE_NAME+\"创建\");\n        this.initData()\n    },\n    beforeMount() {\n        console.log(PAGE_NAME+\"初始化\");\n    },\n    mounted(){\n        console.log(PAGE_NAME+\"初始化完成\");\n    },\n    beforeDestroy() {\n        console.log(PAGE_NAME+\"销毁前\");\n    },\n    destroyed() {\n        console.log(PAGE_NAME+\"销毁了\");\n    },\n    beforeRouteEnter(to, from, next) {\n        console.log(PAGE_NAME+\"路由器进入\");\n        next(vm => {\n            vm.initData();\n        });\n    },\n    beforeRouteLeave(to, from, next) {\n        this.orderItem = undefined;\n        this.drawer = false;\n        console.log(PAGE_NAME,\"组件导航守卫路由器离开\");\n        next();\n    },\n    methods:{\n\n        initData(){\n            if (this.$route.params) if (this.$route.params.id)  this.orderItem = this.$route.params;\n            if (!this.orderItem){ Notify(\"无权操作\");this.$router.replace( {path:\"/order\"}); }\n            if (this.orderItem) {\n                console.log(\"status,\",this.orderItem.status);\n                if (this.orderItem.status >= 2 && 6 <= this.orderItem.status){\n                    Notify(\"您选择订单无法操作\")\n                    this.$router.replace(\"/order\");\n                }\n            }\n        },\n\n        // 发起退款申请\n        onSubmit(){\n            if (this.orderItem){\n                const { id } = this.orderItem;\n                if (id){\n                    this.drawer = false;\n                    this.$dialog.confirm({\n                        title: '警告提示',\n                        message: '确认要提交申请退款吗？',\n                    }).then(async () => {\n                        const vo = {\n                            orderId: id,// 订单号\n                            buyerName: this.buyerName,// 退款原因不能为空\n                            buyerPhoneNumber: this.buyerPhoneNumber,// 退款申请人\n                            buyerReason: this.buyerReason,// 退款申请人的联系电话\n                        }\n                        let loadingInstance = Loading.service({ fullscreen: true });\n                        try {\n                            const {status,code,message} = await orderTradeRefundApi.returnApply(vo);\n                            if (status){\n                                loadingInstance.close()\n                                this.$ssToast(\"提交成功,正在去订单页\")\n                                this.$router.replace(\"/order\");\n                                return\n                            }\n                        }catch (e){}\n                        loadingInstance.close()\n                        Notify(\"未知错误,请重试\")\n                        this.$router.replace(\"/order\");\n                    }).catch(() => { });\n                }else{\n                    Notify(\"未知错误,请重试\")\n                    this.$router.replace(\"/order\");\n                }\n            }else{\n                Notify(\"未知错误,请重试\")\n                this.$router.replace(\"/order\");\n            }\n        },\n\n\n        // 检查手机号\n        numberCheckingEvent(e){\n            const reg =  /^[1-9]\\d*$/;\n            if (e){\n                if(!reg.test(e)){\n                    this.$message({\n                        message: '请输入数字',\n                        type: 'warning'\n                    });\n                    this.refundApplicantPhoneNumber = undefined;\n                }\n            }\n        },\n\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.ss-drawer-form__body{\n    font-size: 16rem;\n    box-sizing: border-box;\n    padding: 10rem;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    .ss-order-details__body{\n        line-height: 38rem;\n        margin-bottom: 6rem;\n        span:nth-child(1){\n            padding-right: 6rem;\n        }\n    }\n    .ss-order-not__body{\n        width: 100%;\n        div:nth-child(1){\n            margin-bottom: 8rem;\n        }\n    }\n    .ss-order-submit-button__body{\n        margin-top: 18rem;\n        width: 100%;\n        .ss-submit-button{\n            width: 100%;\n        }\n    }\n}\n</style>"]}]}