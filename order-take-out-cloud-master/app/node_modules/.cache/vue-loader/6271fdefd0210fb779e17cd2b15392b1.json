{"remainingRequest":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\src\\views\\GetCoupon.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\src\\views\\GetCoupon.vue","mtime":1659793824000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge0xvYWRpbmd9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQge05vdGlmeSwgVG9hc3R9IGZyb20gJ3ZhbnQnOwppbXBvcnQgZGF0ZUZvbWF0VXRpbHMgZnJvbSAiLi4vdXRpbHMvZGF0ZUZvbWF0VXRpbHMiOwppbXBvcnQgY291cG9uQmF0Y2hBcGkgZnJvbSAiQC9hcGkvY291cG9uQmF0Y2hBcGkiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkdldENvdXBvbiIsCiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICBjb3Vwb25QYWdlTGlzdDp1bmRlZmluZWQsCiAgICAgICAgICAgIHBvcHVwU2hvdzpmYWxzZSwKICAgICAgICAgICAgcG9wdXBNZXNzYWdlOifmmoLml6Dor7TmmI4nLAogICAgICAgIH0KICAgIH0sCgogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgIH0sCgogICAgbWV0aG9kczp7CgogICAgICAgIGluaXQoKXsKICAgICAgICAgICAgdGhpcy5sb2FkQ291cG9uQmF0Y2hQYWdlTGlzdCgpOwogICAgICAgIH0sCgogICAgICAgIGFzeW5jIGxvYWRDb3Vwb25CYXRjaFBhZ2VMaXN0KCl7CiAgICAgICAgICAgIGxldCBsb2FkaW5nSW5zdGFuY2UgPSBMb2FkaW5nLnNlcnZpY2UoeyBmdWxsc2NyZWVuOiB0cnVlIH0pOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHtzdGF0dXMsIG1lc3NhZ2UsIGRhdGF9ID0gYXdhaXQgY291cG9uQmF0Y2hBcGkubGlzdCgpOwogICAgICAgICAgICAgICAgaWYoc3RhdHVzKXsKICAgICAgICAgICAgICAgICAgICBsb2FkaW5nSW5zdGFuY2UuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdXBvblBhZ2VMaXN0ID0gZGF0YTsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIE5vdGlmeShtZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWNhdGNoIChlKXt9CiAgICAgICAgICAgIGxvYWRpbmdJbnN0YW5jZS5jbG9zZSgpOwogICAgICAgIH0sCgogICAgICAgIGRhdGVGb3JtYXQodjEpewogICAgICAgICAgICByZXR1cm4gZGF0ZUZvbWF0VXRpbHMuZGF0ZUZvcm1hdCh2MSwieXl5eS1NTS1kZCBoaDptbSIpCiAgICAgICAgfSwKCiAgICAgICAgY291cG9uQ29sb3JDbGFzcyh2MSl7CiAgICAgICAgICAgIC8vIDEw5YWD5Lul5LiLCiAgICAgICAgICAgIGlmICgxMCA+PSB2MSl7CiAgICAgICAgICAgICAgICByZXR1cm4gInN0YW1wMDEiOwogICAgICAgICAgICB9IGVsc2UgaWYgKHYxID49IDExICYmIHYxIDw9IDMwKSB7CiAgICAgICAgICAgICAgICAvLyAxMeWFgyB+IDMw5YWDCiAgICAgICAgICAgICAgICByZXR1cm4gInN0YW1wMDIiCiAgICAgICAgICAgIH0gZWxzZSBpZiAodjEgPj0gMzEgJiYgdjEgPD0gNTApIHsKICAgICAgICAgICAgICAgIC8vIDMx5YWDIH4gNTDlhYMKICAgICAgICAgICAgICAgIHJldHVybiAic3RhbXAwMyIKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIDUx5YWD5Lul5LiKCiAgICAgICAgICAgICAgICByZXR1cm4gInN0YW1wMDQiCiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBhc3luYyBnZXRDb3Vwb25FdmVudChjb3Vwb25PYmopewogICAgICAgICAgICBpZiAoY291cG9uT2JqKXsKICAgICAgICAgICAgICAgIGlmIChjb3Vwb25PYmouYmF0Y2hJZCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IGxvYWRpbmdJbnN0YW5jZSA9IExvYWRpbmcuc2VydmljZSh7IGZ1bGxzY3JlZW46IHRydWUgfSk7CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge3N0YXR1cywgbWVzc2FnZSwgZGF0YX0gPSBhd2FpdCBjb3Vwb25CYXRjaEFwaS5yZWNlaXZlQ291cG9uQnlJZChjb3Vwb25PYmouYmF0Y2hJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0YXR1cyl7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3Vwb25PYmouaWQgPSBkYXRhOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ0luc3RhbmNlLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUb2FzdC5zdWNjZXNzKCflt7Lpooblj5bmiJDlip8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb3RpZnkobWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9Y2F0Y2ggKGUpe30KICAgICAgICAgICAgICAgICAgICBsb2FkaW5nSW5zdGFuY2UuY2xvc2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIG9uQ291cG9uRGV0YWlsRXZlbnQoY291cG9uT2JqKXsKICAgICAgICAgICAgdGhpcy5wb3B1cFNob3cgPSB0cnVlOwogICAgICAgICAgICB0aGlzLnBvcHVwTWVzc2FnZSA9IGNvdXBvbk9iai5kZXNjcmlwdGlvbjsKICAgICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["GetCoupon.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"GetCoupon.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <template v-if=\"couponPageList\">\n            <div v-for=\"cp in couponPageList\" :key=\"cp.id ||cp.batchId\" class=\"stamp\" :class=\"couponColorClass(cp.price)\" >\n                <div class=\"par\"  @click.stop.prevent=\"onCouponDetailEvent(cp)\">\n                    <p v-text=\"cp.couponName\"></p>\n                    <sub class=\"sign\">￥</sub>\n                    <span v-text=\"cp.price\"></span>\n                    <sub>全场满减</sub>\n                    <p>订单满{{ cp.threshold }}元即可使用</p></div>\n                <div class=\"copy\">\n                    满减券\n                    <p>{{dateFormat(cp.startTime)}}<br>{{dateFormat(cp.endTime)}}</p>\n                    <a @click.stop.prevent=\"getCouponEvent(cp)\">立即领取</a>\n                </div>\n                <div class=\"card__body\"></div>\n                <div class=\"ss-no\" v-if=\"cp.id\" @click.stop.prevent=\"onCouponDetailEvent(cp)\">\n                    <span>已领取</span>\n                </div>\n            </div>\n        </template>\n\n        <div class=\"popup__body\" v-show=\"popupShow\"\n             @click.stop.prevent=\"popupShow = false\">\n            <div class=\"popup-message__body\"\n                 @click.stop.prevent=\"\" v-text=\"popupMessage\"></div>\n        </div>\n\n    </div>\n</template>\n\n<script>\n\nimport {Loading} from 'element-ui';\nimport {Notify, Toast} from 'vant';\nimport dateFomatUtils from \"../utils/dateFomatUtils\";\nimport couponBatchApi from \"@/api/couponBatchApi\";\n\nexport default {\n    name: \"GetCoupon\",\n    data(){\n        return{\n            couponPageList:undefined,\n            popupShow:false,\n            popupMessage:'暂无说明',\n        }\n    },\n\n    created() {\n        this.init();\n    },\n\n    methods:{\n\n        init(){\n            this.loadCouponBatchPageList();\n        },\n\n        async loadCouponBatchPageList(){\n            let loadingInstance = Loading.service({ fullscreen: true });\n\n            try {\n                const {status, message, data} = await couponBatchApi.list();\n                if(status){\n                    loadingInstance.close();\n                    this.couponPageList = data;\n                }else{\n                    Notify(message);\n                }\n            }catch (e){}\n            loadingInstance.close();\n        },\n\n        dateFormat(v1){\n            return dateFomatUtils.dateFormat(v1,\"yyyy-MM-dd hh:mm\")\n        },\n\n        couponColorClass(v1){\n            // 10元以下\n            if (10 >= v1){\n                return \"stamp01\";\n            } else if (v1 >= 11 && v1 <= 30) {\n                // 11元 ~ 30元\n                return \"stamp02\"\n            } else if (v1 >= 31 && v1 <= 50) {\n                // 31元 ~ 50元\n                return \"stamp03\"\n            } else {\n                // 51元以上\n                return \"stamp04\"\n            }\n        },\n\n        async getCouponEvent(couponObj){\n            if (couponObj){\n                if (couponObj.batchId){\n                    let loadingInstance = Loading.service({ fullscreen: true });\n                    try {\n                        const {status, message, data} = await couponBatchApi.receiveCouponById(couponObj.batchId);\n                        if(status){\n                            couponObj.id = data;\n                            loadingInstance.close();\n                            Toast.success('已领取成功');\n                        }else{\n                            Notify(message);\n                        }\n                    }catch (e){}\n                    loadingInstance.close();\n                }\n            }\n        },\n\n        onCouponDetailEvent(couponObj){\n            this.popupShow = true;\n            this.popupMessage = couponObj.description;\n        },\n    }\n}\n</script>\n\n<style scoped>\n.popup__body{\n    position: fixed;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1000;\n    background-color: rgba(0,0,0,0.35);\n}\n.popup-message__body{\n    background-color: #FFFFFF;\n    box-sizing: border-box;\n    width: 80vw;\n    min-height: 30vh;\n    max-height: 60vh;\n    padding: 16rem;\n    border-radius: 8rem;\n    overflow: hidden auto;\n    font-size: 14rem;\n    box-shadow: 0 2px 12px rgba(0,0,0,0.35);\n}\n.stamp {\n    margin: 10rem auto;\n    display: grid;\n    grid-template-columns: 2fr 1fr;\n    /*width: 387px;*/\n    width: 342px;\n    height: 140px;\n    padding: 0 10px;\n    position: relative;\n    overflow: hidden;\n}\n\n.stamp:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 10px;\n    right: 10px;\n    z-index: -1;\n}\n\n.stamp:after {\n    content: '';\n    position: absolute;\n    left: 10px;\n    top: 10px;\n    right: 10px;\n    bottom: 10px;\n    /*box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.5);*/\n    z-index: -2;\n}\n\n.stamp .card__body {\n    z-index: 1;\n    position: absolute;\n    left: 20%;\n    top: 45px;\n    height: 190px;\n    width: 390px;\n    background-color: rgba(255, 255, 255, .15);\n    transform: rotate(-30deg);\n}\n\n.stamp .par {\n    z-index: 100;\n    height: 140rem;\n    box-sizing:border-box;\n    float: left;\n    padding: 0 15px 0;\n    /*width: 220px;*/\n    width: 100%;\n    border-right: 2px dashed rgba(255, 255, 255, .3);\n    text-align: left;\n}\n\n.stamp .par p {\n    font-size: 12rem;\n    color: #fff;\n}\n\n.stamp .par span {\n    font-size: 50px;\n    color: #fff;\n    margin-right: 5px;\n}\n\n.stamp .par .sign {\n    font-size: 34px;\n}\n\n.stamp .par sub {\n    font-size: 12rem;\n    position: relative;\n    top: -5px;\n    color: rgba(255, 255, 255, .8);\n}\n\n.stamp .copy {\n    z-index: 100;\n    /*display: inline-block;*/\n    padding: 21px 14px;\n    width: 100px;\n    vertical-align: text-bottom;\n    font-size: 30px;\n    color: rgb(255, 255, 255);\n    display: flex;\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: flex-start;\n}\n\n.stamp .copy p {\n    z-index: 100;\n    font-size: 16px;\n    margin-top: 15px;\n}\n\n.stamp .copy a {\n    text-align: center;\n    z-index: 100;\n    background-color: #fff;\n    color: #333;\n    font-size: 14px;\n    text-decoration: none;\n    padding: 5px 10px;\n    border-radius: 3px;\n    display: block;\n}\n\n.stamp01 {\n    background: #F39B00;\n    background: radial-gradient(rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 5px, #F39B00 5px);\n    background-size: 15px 15px;\n    background-position: 9px 3px;\n}\n\n.stamp01:before {\n    background-color: #F39B00;\n}\n\n.stamp01 .copy {\n    z-index: 2;\n    padding: 10px 6px 10px 12px;\n    font-size: 24px;\n}\n\n.stamp01 .copy p {\n    /*font-size: 14px;*/\n    font-size: 12rem;\n    margin-top: 5px;\n    margin-bottom: 8px;\n}\n\n.stamp01 .copy a {\n    background-color: #fff;\n    color: #333;\n    font-size: 14px;\n    text-decoration: none;\n    padding: 5px 10px;\n    border-radius: 3px;\n    display: block;\n    z-index: 6;\n}\n\n\n.stamp02 {\n    background: #D24161;\n    background: radial-gradient(transparent 0, transparent 5px, #D24161 5px);\n    background-size: 15px 15px;\n    background-position: 9px 3px;\n}\n\n.stamp02:before {\n    background-color: #D24161;\n}\n\n.stamp02 .copy {\n    z-index: 2;\n    padding: 10px 6px 10px 12px;\n    font-size: 24px;\n}\n\n.stamp02 .copy p {\n    /*font-size: 14px;*/\n    font-size: 12rem;\n    margin-top: 5px;\n    margin-bottom: 8px;\n}\n\n.stamp02 .copy a {\n    background-color: #fff;\n    color: #333;\n    font-size: 14px;\n    text-decoration: none;\n    padding: 5px 10px;\n    border-radius: 3px;\n    display: block;\n    z-index: 6;\n}\n\n.stamp03 {\n    background: #7EAB1E;\n    background: radial-gradient(transparent 0, transparent 5px, #7EAB1E 5px);\n    background-size: 15px 15px;\n    background-position: 9px 3px;\n}\n\n.stamp03:before {\n    background-color: #7EAB1E;\n}\n\n.stamp03 .copy {\n    z-index: 2;\n    padding: 10px 6px 10px 12px;\n    font-size: 24px;\n}\n\n.stamp03 .copy p {\n    /*font-size: 14px;*/\n    margin-top: 5px;\n    font-size: 12rem;\n    margin-bottom: 8px;\n}\n\n.stamp03 .copy a {\n    background-color: #fff;\n    color: #333;\n    font-size: 14px;\n    text-decoration: none;\n    padding: 5px 10px;\n    border-radius: 3px;\n    display: block;\n    z-index: 6;\n}\n\n.stamp04 {\n    background: #50ADD3;\n    background: radial-gradient(rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 4px, #50ADD3 4px);\n    background-size: 15px 15px;\n    background-position: 9px 3px;\n}\n\n.stamp04:before {\n    background-color: #50ADD3;\n}\n\n.stamp04 .copy {\n    z-index: 2;\n    padding: 10px 6px 10px 12px;\n    font-size: 24px;\n}\n\n.stamp04 .copy p {\n    /*font-size: 14px;*/\n    margin-top: 5px;\n    font-size: 12rem;\n    margin-bottom: 8px;\n}\n\n.stamp04 .copy a {\n    background-color: #fff;\n    color: #333;\n    font-size: 14px;\n    text-decoration: none;\n    padding: 5px 10px;\n    border-radius: 3px;\n    display: block;\n    z-index: 6;\n}\n.ss-no{\n    color: #FFFFFF;\n    font-size: 30rem;\n    z-index: 100;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.ss-no span:nth-child(1){\n    background-color: rgba(0,0,0,0.35);\n    border-radius: 10rem;\n    padding: 32rem 64rem;\n}\n</style>"]}]}