{"remainingRequest":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\src\\views\\Login.vue?vue&type=style&index=0&id=26084dc2&lang=scss&scoped=true&","dependencies":[{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\src\\views\\Login.vue","mtime":1663569307521},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\sass-loader\\lib\\loader.js","mtime":1523574387000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnQtbG9naW4gewogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgLy8g5qCH6aKYCiAgICAudC1iIHsKICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0OwogICAgICAgIGZvbnQtc2l6ZTogNDZweDsKICAgICAgICBjb2xvcjogIzAwMDsKICAgICAgICBwYWRkaW5nOiAxMDBweCAwIDM4cHggMjZweDsKICAgICAgICAvL3RyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTBweCk7CiAgICB9CgogICAgLy8g6KGo5Y2VCiAgICAuY2wgewoKICAgICAgICAvLyDovpPlhaXmoYbnm5LlrZAKICAgICAgICAudC1hIHsKCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlYmViZWI7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgICAgICAgICAgbWFyZ2luOiAwIDI2cHggOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgICAgICAgICBib3gtc2l6aW5nOmJvcmRlci1ib3g7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsKICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiA0OHJlbSAxZnI7CiAgICAgICAgICAgIC8vIOi+k+WFpeahhuWbvuaghwogICAgICAgICAgICBkaXY6bnRoLWNoaWxkKDEpewogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgICAgIGkgewogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZjMjAwOwogICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjZyZW07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIOi+k+WFpeahhgogICAgICAgICAgICBpbnB1dCB7CiAgICAgICAgICAgICAgICAvLyBwYWRkaW5nOiAwIDIwcHggMCAxMjBweDsKICAgICAgICAgICAgICAgIGhlaWdodDogNDVweDsKICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA0NXB4OwogICAgICAgICAgICAgICAgLy8gbWFyZ2luLWJvdHRvbTogMjVweDsKICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQ6ICNmNGY0ZjQ7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiBub25lOwogICAgICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICB9CgogICAgICAgICAgICAudC1pbnAtY29kZXsKICAgICAgICAgICAgICAgIC8vdGV4dC1hbGlnbjogbGVmdDsKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciA4NnJlbTsKICAgICAgICAgICAgICAgIC50LWMgewogICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgICAgICAgICBzcGFuewogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICAgICAgICAgICAgICAvL2hlaWdodDogMzZweDsKICAgICAgICAgICAgICAgICAgICAgICAgLy9saW5lLWhlaWdodDogMzZweDsKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmYzIwMDsKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDZweDsKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4OwogICAgICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8g6Ieq5Yqo5rOo5YaM5o+Q56S6CiAgICAgICAgLnQtZCB7CiAgICAgICAgICAgIGNvbG9yOiAjOTk5OwogICAgICAgICAgICBmb250LXNpemU6IDE1cHg7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgbWFyZ2luOiAyOHB4IDA7CiAgICAgICAgICAgIHNwYW46bnRoLWNoaWxkKDIpIHsKICAgICAgICAgICAgICAgIGNvbG9yOiAjMDAwOwogICAgICAgICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDA7CiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIOeZu+W9leaMiemSrgogICAgICAgIGJ1dHRvbiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmYzIwMDsKICAgICAgICAgICAgY29sb3I6ICNmZmY7CiAgICAgICAgICAgIGhlaWdodDogNDVweDsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDZweCA4NnB4OwogICAgICAgIH0KCiAgICAgICAgLy8g55m75b2V5oyJ6ZKu5Y+v5Lul5oyJ55qE54q25oCBCiAgICAgICAgLnN1Ym1pdC1hY3RpdmUgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjAxLCA3MSwgMC42Myk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIOeUqOaIt+WNj+iurgogICAgLnQtZiB7CiAgICAgICAgY29sb3I6ICM2NjY7CiAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDFweDsKICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgei1pbmRleDogOTk5OTk7CiAgICAgICAgbWFyZ2luLXRvcDogODBweDsKICAgICAgICBzcGFuOm50aC1jaGlsZCgyKXsKICAgICAgICAgICAgY29sb3I6ICMwMDA7CiAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAwOwogICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsKICAgICAgICB9CiAgICB9Cgp9Cgo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"t-login\" v-loading=\"loading\">\n\n        <!-- 标题 -->\n        <div class=\"t-b\">{{ title }}</div>\n\n        <!-- 验证码登录 -->\n        <div>\n            <div class=\"cl\">\n                <div class=\"t-a\">\n                    <div>\n                        <i class=\"el-icon-mobile-phone\"></i>\n                    </div>\n                    <input v-model=\"phone\" placeholder=\"请输入手机号\"/>\n                </div>\n                <div class=\"t-a\">\n                    <div>\n                        <i class=\"el-icon-chat-dot-round\"></i>\n                    </div>\n                    <div class=\"t-inp-code\">\n                        <input v-model=\"checknum\" placeholder=\"请输入验证码\"/>\n                        <div class=\"t-c\"  >\n                            <span @click.stop.prevent=\"getcode\" v-text=\"checknummessage\"></span>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"t-d\" >\n                    <span>未注册的手机号验证后将</span>\n                    <span>自动注册</span>\n                </div>\n\n                <button :class=\"{'submit-active' : disable}\"\n                            :disabled=\"disable\"\n                        @click.stop.prevent=\"submit\" >\n                    立即登录\n                </button>\n\n            </div>\n\n        </div>\n\n        <div class=\"t-f\">\n            <span>登录即同意</span>\n            <span>《<a href=\"/#/user/agreement\">用户协议</a>》</span>\n        </div>\n\n\n    </div>\n</template>\n\n<script>\n\nimport login from \"../api/loginApi\"\nimport {decryptByAES, encryptByAES} from \"../utils/des/secruity\";\nimport localStorage from \"../utils/localStorage\";\nimport systemProperties from \"@/common/system\";\nimport {Notify} from 'vant';\n\nexport default {\n\n    name: \"Login\",\n\n    data() {\n        return {\n            title: '欢迎登录',\n            // 手机号\n            phone: '19112345678',\n            // 验证码\n            checknum: '',\n            // 时间\n            codetime: 0,\n            // 登录按钮控制(true禁用,false不禁用)\n            disable: true,\n            // 验证码起始时间\n            codetimestart: 120,\n            codetimeOjbect: null,\n            loading: false,\n        }\n    },\n\n    watch: {\n        /** 监听用户输入,符合规则的开启按钮*/\n        phone(val) {\n            this.onbtncheck();\n        },\n        checknum(val) {\n            this.onbtncheck();\n        }\n    },\n\n    computed: {\n\n        // 计算验证码有效时间\n        checknummessage() {\n            let msg = '获取验证码';\n            if (!this.codetime) {\n                if (this.isgot) {\n                    msg = '重新验证码';\n                }\n            } else {\n                this.isgot = true;\n                msg = this.codetime + 's';\n            }\n            return msg;\n        }\n    },\n\n    created() {\n\n    },\n\n    methods: {\n\n        // 获取验证码\n        async getcode() {\n            // 当前验证码时间没有就不执行\n            if (this.codetime > 0) {\n                this.$message({ message: '还在有效期哦~', type: 'warning' });\n                return;\n            }\n            //手机号正则,验证合法性\n            if (!this.isphone(this.phone)) {\n                this.$message({ message: '请输入手机号哦~', type: 'warning' });\n                return;\n            }\n            this.loading = true;\n            // 发起异步获取验证码\n            try {\n                // 加密处理\n                const phone = encryptByAES(this.phone, systemProperties.outServiceAesKey);\n                console.log(phone)\n                const {status, message} = await login.send({phone});\n                if (status) {\n                    this.$message({ message: message, type: 'success' });\n                    this.loading = false;\n                    this.codetime = this.codetimestart;\n                    this.codetimeOjbect = setInterval(() => {\n                        this.codetime--;\n                        if (0 >= this.codetime) {\n                            clearInterval(this.codetimeOjbect);\n                            this.codetimeOjbect = undefined;\n                            this.codetime = 0;\n                        }\n                    }, 1000)\n                    return undefined;\n                }\n                this.loading = false;\n                this.$message({ message: message, type: 'warning' });\n            } catch (e) {\n                this.loading = false;\n                console.log(\"获取验证码发生异常=>\", e);\n            }\n        },\n\n        // 登录\n        async submit() {\n            if (!this.phone) {\n                this.$message({ message: '请输入手机号哦~', type: 'warning' });\n                return;\n            }\n            if (!this.checknum) {\n                this.$message({ message: '请输入验证码哦~', type: 'warning' });\n                return;\n            }\n            try {\n                const vo = {\n                    phoneNumber: encryptByAES(this.phone, systemProperties.outServiceAesKey),\n                    verificationCode: this.checknum\n                }\n                const { status, data, message} = await login.submit(vo);\n                if (status) {\n                    let user = JSON.parse(decryptByAES(data));\n                    // 解密并存储用户信息\n                    localStorage.setByAES(\"STARSHINT_TOP_USER_INFO\",user);\n                    // 清除信息\n                    this.phone = undefined;\n                    this.checknum = undefined;\n                    // 清除定时器\n                    clearInterval(this.codetimeOjbect);\n                    this.codetimeOjbect = undefined;\n                    Notify({type: 'success', message: user['nickname'] + '，欢迎回来~'});\n                    // 跳回来登录的页面\n                    this.$router.replace({ path: \"/\" });\n                    return;\n                }\n                this.$message({ message: message, type: 'warning' });\n            } catch (e) {\n                console.log(\"验证码登录异常=>\", e);\n            }\n        },\n\n        //判断是否有值才能点击\n        onbtncheck() {\n            if ((this.account && this.password) || (this.phone && this.checknum)) {\n                this.disable = false;\n                return;\n            }\n            this.disable = true;\n        },\n\n        // 手机号正则,验证合法性\n        isphone(value) {\n            let mPattern = /^1[3456789]\\d{9}$/;\n            return mPattern.test(value);\n        }\n    }\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n.t-login {\n    text-align: center;\n    // 标题\n    .t-b {\n        text-align: left;\n        font-size: 46px;\n        color: #000;\n        padding: 100px 0 38px 26px;\n        //transform: translateX(-50px);\n    }\n\n    // 表单\n    .cl {\n\n        // 输入框盒子\n        .t-a {\n\n            border: 1px solid #ebebeb;\n            border-radius: 6px;\n            margin: 0 26px ;\n            margin-bottom: 20px;\n            box-sizing:border-box;\n            position: relative;\n            display: grid;\n            grid-template-columns: 48rem 1fr;\n            // 输入框图标\n            div:nth-child(1){\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                i {\n                    color: #ffc200;\n                    font-size: 26rem;\n                }\n            }\n\n            // 输入框\n            input {\n                // padding: 0 20px 0 120px;\n                height: 45px;\n                line-height: 45px;\n                // margin-bottom: 25px;\n                // background: #f4f4f4;\n                font-size: 16px;\n                border-radius: 8px;\n                box-shadow: none;\n                border: none;\n            }\n\n            .t-inp-code{\n                //text-align: left;\n                display: grid;\n                grid-template-columns: 1fr 86rem;\n                .t-c {\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    span{\n                        color: #fff;\n                        font-size: 14px;\n                        //height: 36px;\n                        //line-height: 36px;\n                        background: #ffc200;\n                        padding: 8px 6px;\n                        border-radius: 6px;\n                        z-index: 99;\n                    }\n\n                }\n\n            }\n        }\n\n        // 自动注册提示\n        .t-d {\n            color: #999;\n            font-size: 15px;\n            text-align: center;\n            margin: 28px 0;\n            span:nth-child(2) {\n                color: #000;\n                letter-spacing: 0;\n                font-weight: 600;\n                margin-left: 10px;\n            }\n        }\n\n        // 登录按钮\n        button {\n            font-size: 18px;\n            background: #ffc200;\n            color: #fff;\n            height: 45px;\n            border: none;\n            border-radius: 6px;\n            padding: 6px 86px;\n        }\n\n        // 登录按钮可以按的状态\n        .submit-active {\n            background: rgba(255, 201, 71, 0.63);\n        }\n    }\n\n    // 用户协议\n    .t-f {\n        color: #666;\n        letter-spacing: 1px;\n        font-size: 16px;\n        z-index: 99999;\n        margin-top: 80px;\n        span:nth-child(2){\n            color: #000;\n            letter-spacing: 0;\n            font-weight: 600;\n            margin-left: 10px;\n        }\n    }\n\n}\n\n</style>\n"]}]}