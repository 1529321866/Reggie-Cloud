{"remainingRequest":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\src\\views\\OrderReturnApply.vue?vue&type=style&index=0&id=7b28dfac&lang=scss&scoped=true&","dependencies":[{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\src\\views\\OrderReturnApply.vue","mtime":1659793824000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\sass-loader\\lib\\loader.js","mtime":1523574387000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\git projects\\order-take-out-cloud-master\\order-take-out-cloud-master\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouc3MtZHJhd2VyLWZvcm1fX2JvZHl7CiAgICBmb250LXNpemU6IDE2cmVtOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIHBhZGRpbmc6IDEwcmVtOwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgIC5zcy1vcmRlci1kZXRhaWxzX19ib2R5ewogICAgICAgIGxpbmUtaGVpZ2h0OiAzOHJlbTsKICAgICAgICBtYXJnaW4tYm90dG9tOiA2cmVtOwogICAgICAgIHNwYW46bnRoLWNoaWxkKDEpewogICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiA2cmVtOwogICAgICAgIH0KICAgIH0KICAgIC5zcy1vcmRlci1ub3RfX2JvZHl7CiAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgZGl2Om50aC1jaGlsZCgxKXsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHJlbTsKICAgICAgICB9CiAgICB9CiAgICAuc3Mtb3JkZXItc3VibWl0LWJ1dHRvbl9fYm9keXsKICAgICAgICBtYXJnaW4tdG9wOiAxOHJlbTsKICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAuc3Mtc3VibWl0LWJ1dHRvbnsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["OrderReturnApply.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OrderReturnApply.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"ss-drawer-form__body\" v-if=\"orderItem\">\n        <div class=\"ss-order-details__body\">\n            <div>\n                <span>支付流水:</span>\n                <span>{{ orderItem.id }}</span>\n            </div>\n            <div>\n                <span>订单号:</span>\n                <span>{{ orderItem.outTradeNo }}</span>\n            </div>\n            <div>\n                <span>订单状态:</span>\n                <span>{{ statusMessage }}</span>\n            </div>\n            <div>\n                <span>退款路径:</span>\n                <span>原支付路径退回</span>\n            </div>\n            <div>\n                <span>退单菜品数量:</span>\n                <span>{{ orderItem.productTotalNumber }}</span>\n            </div>\n            <div>\n                <span>实际支付金额:</span>\n                <span>{{ orderItem.billPrice }}</span>\n            </div>\n            <div>\n                <span>退款金额:</span>\n                <span>{{ orderItem.billPrice}}</span>\n            </div>\n        </div>\n        <div class=\"ss-order-not__body\">\n            <div>申请人姓名:</div>\n            <el-input v-model=\"buyerName\" placeholder=\"请输入申请人姓名\"></el-input>\n        </div>\n        <div class=\"ss-order-not__body\">\n            <div>联系手机号:</div>\n            <el-input @input=\"numberCheckingEvent\" v-model=\"buyerPhoneNumber\"  placeholder=\"请输入联系手机号\"></el-input>\n        </div>\n        <div class=\"ss-order-not__body\">\n            <div>退款原因:</div>\n            <el-input\n                type=\"textarea\"\n                placeholder=\"请输入退款原因\"\n                v-model=\"buyerReason\"\n                maxlength=\"30\"\n                show-word-limit/>\n        </div>\n        <div class=\"ss-order-submit-button__body\">\n            <el-button class=\"ss-submit-button\" type=\"primary\" @click.stop.prevent=\"onSubmit\">提交</el-button>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {Notify} from 'vant';\nimport {Loading} from \"element-ui\";\nimport orderTradeRefundApi from \"../api/orderTradeRefundApi\";\n\nconst PAGE_NAME = \"退款申请页面\"\nexport default {\n    name: \"OrderReturnApply\",\n    data(){\n        return{\n            orderItem:undefined,\n            /** 退款原因不能为空 */\n            buyerReason: \"测试申请理由\",\n            /** 退款申请人 */\n            buyerName: \"莉莉丝\",\n            /** 退款申请人的联系电话 */\n            buyerPhoneNumber: \"19112345678\",\n        }\n    },\n    computed: {\n        statusMessage(){\n            if (this.orderItem){\n                if (this.orderItem.id){\n                    switch (this.orderItem.status){\n                        case 2: return \"已出单\";\n                        case 3: return \"待取餐\";\n                        case 4: return \"派送中\";\n                        case 5: return \"已送达\";\n                        case 6: return \"完成\";\n                    }\n                }\n            }\n        }\n    },\n    created(){\n        console.log(PAGE_NAME+\"创建\");\n        this.initData()\n    },\n    beforeMount() {\n        console.log(PAGE_NAME+\"初始化\");\n    },\n    mounted(){\n        console.log(PAGE_NAME+\"初始化完成\");\n    },\n    beforeDestroy() {\n        console.log(PAGE_NAME+\"销毁前\");\n    },\n    destroyed() {\n        console.log(PAGE_NAME+\"销毁了\");\n    },\n    beforeRouteEnter(to, from, next) {\n        console.log(PAGE_NAME+\"路由器进入\");\n        next(vm => {\n            vm.initData();\n        });\n    },\n    beforeRouteLeave(to, from, next) {\n        this.orderItem = undefined;\n        this.drawer = false;\n        console.log(PAGE_NAME,\"组件导航守卫路由器离开\");\n        next();\n    },\n    methods:{\n\n        initData(){\n            if (this.$route.params) if (this.$route.params.id)  this.orderItem = this.$route.params;\n            if (!this.orderItem){ Notify(\"无权操作\");this.$router.replace( {path:\"/order\"}); }\n            if (this.orderItem) {\n                console.log(\"status,\",this.orderItem.status);\n                if (this.orderItem.status >= 2 && 6 <= this.orderItem.status){\n                    Notify(\"您选择订单无法操作\")\n                    this.$router.replace(\"/order\");\n                }\n            }\n        },\n\n        // 发起退款申请\n        onSubmit(){\n            if (this.orderItem){\n                const { id } = this.orderItem;\n                if (id){\n                    this.drawer = false;\n                    this.$dialog.confirm({\n                        title: '警告提示',\n                        message: '确认要提交申请退款吗？',\n                    }).then(async () => {\n                        const vo = {\n                            orderId: id,// 订单号\n                            buyerName: this.buyerName,// 退款原因不能为空\n                            buyerPhoneNumber: this.buyerPhoneNumber,// 退款申请人\n                            buyerReason: this.buyerReason,// 退款申请人的联系电话\n                        }\n                        let loadingInstance = Loading.service({ fullscreen: true });\n                        try {\n                            const {status,code,message} = await orderTradeRefundApi.returnApply(vo);\n                            if (status){\n                                loadingInstance.close()\n                                this.$ssToast(\"提交成功,正在去订单页\")\n                                this.$router.replace(\"/order\");\n                                return\n                            }\n                        }catch (e){}\n                        loadingInstance.close()\n                        Notify(\"未知错误,请重试\")\n                        this.$router.replace(\"/order\");\n                    }).catch(() => { });\n                }else{\n                    Notify(\"未知错误,请重试\")\n                    this.$router.replace(\"/order\");\n                }\n            }else{\n                Notify(\"未知错误,请重试\")\n                this.$router.replace(\"/order\");\n            }\n        },\n\n\n        // 检查手机号\n        numberCheckingEvent(e){\n            const reg =  /^[1-9]\\d*$/;\n            if (e){\n                if(!reg.test(e)){\n                    this.$message({\n                        message: '请输入数字',\n                        type: 'warning'\n                    });\n                    this.refundApplicantPhoneNumber = undefined;\n                }\n            }\n        },\n\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.ss-drawer-form__body{\n    font-size: 16rem;\n    box-sizing: border-box;\n    padding: 10rem;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    .ss-order-details__body{\n        line-height: 38rem;\n        margin-bottom: 6rem;\n        span:nth-child(1){\n            padding-right: 6rem;\n        }\n    }\n    .ss-order-not__body{\n        width: 100%;\n        div:nth-child(1){\n            margin-bottom: 8rem;\n        }\n    }\n    .ss-order-submit-button__body{\n        margin-top: 18rem;\n        width: 100%;\n        .ss-submit-button{\n            width: 100%;\n        }\n    }\n}\n</style>"]}]}